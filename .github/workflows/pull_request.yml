name: 'Pull Request'

on:
  pull_request:
    branches: [ develop, staging, master ]

env:
  color_var: ff69b4

jobs:
  notify_teams:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Notify Teams of Commits
        uses: microsoft/teams-notification@v1
        with:
          webhook-url: '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'
          title: "New Commits for PR #${{ github.event.pull_request.number }}"
          summary: "The following commits were made:"
          sections: |
            # Commits
            ${{ join([ '- ' + commit.commit.message + ' (' + commit.author.name + ')' for commit in github.event.pull_request.commits ], '\n') }}